{"version":3,"sources":["Popover.ts"],"names":[],"mappings":"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","file":"Popover.js","sourcesContent":["import { Directive, HostListener, ComponentRef, ViewContainerRef, ComponentFactoryResolver, ComponentFactory, Input, OnChanges, SimpleChange } from \"@angular/core\";\nimport {PopoverContent} from \"./PopoverContent\";\n\n@Directive({\n    selector: \"[popover]\",\n    exportAs: \"popover\"\n})\nexport class Popover implements OnChanges {\n\n    // -------------------------------------------------------------------------\n    // Properties\n    // -------------------------------------------------------------------------\n\n    private popover: ComponentRef<PopoverContent>;\n    private visible: boolean;\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(private viewContainerRef: ViewContainerRef,\n                private resolver: ComponentFactoryResolver) {\n    }\n\n    // -------------------------------------------------------------------------\n    // Inputs / Outputs\n    // -------------------------------------------------------------------------\n\n    @Input(\"popover\")\n    content: string|PopoverContent;\n\n    @Input()\n    popoverDisabled: boolean;\n\n    @Input()\n    popoverAnimation: boolean;\n\n    @Input()\n    popoverPlacement: \"top\"|\"bottom\"|\"left\"|\"right\";\n    \n    @Input()\n    popoverTitle: string;\n\n    @Input()\n    popoverOnHover: boolean = false;\n\n    @Input()\n    popoverCloseOnClickOutside: boolean;\n\n    @Input()\n    popoverCloseOnMouseOutside: boolean;\n\n    @Input()\n    popoverDismissTimeout: number = 0;\n\n    // -------------------------------------------------------------------------\n    // Event listeners\n    // -------------------------------------------------------------------------\n\n    @HostListener(\"click\")\n    showOrHideOnClick(): void {\n        if (this.popoverOnHover) return;\n        if (this.popoverDisabled) return;\n        this.toggle();\n    }\n\n    @HostListener(\"focusin\")\n    @HostListener(\"mouseenter\")\n    showOnHover(): void {\n        if (!this.popoverOnHover) return;\n        if (this.popoverDisabled) return;\n        this.show();\n    }\n\n    @HostListener(\"focusout\")\n    @HostListener(\"mouseleave\")\n    hideOnHover(): void {\n        if (this.popoverCloseOnMouseOutside) return; // don't do anything since not we control this\n        if (!this.popoverOnHover) return;\n        if (this.popoverDisabled) return;\n        this.hide();\n    }\n\n    ngOnChanges(changes: {[propertyName: string]: SimpleChange}) {\n        if(changes['popoverDisabled']){\n            if(changes['popoverDisabled'].currentValue){\n                this.hide();\n            }\n        }\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    toggle() {\n        if (!this.visible) {\n            this.show();\n        } else {\n            this.hide();\n        }\n    }\n\n    show() {\n        if (this.visible) return;\n\n        this.visible = true;\n        if (typeof this.content === \"string\") {\n            const factory = this.resolver.resolveComponentFactory(PopoverContent);\n            if (!this.visible)\n                return;\n\n            this.popover = this.viewContainerRef.createComponent(factory);\n            const popover = this.popover.instance as PopoverContent;\n            popover.popover = this;\n            popover.content = this.content as string;\n            if (this.popoverPlacement !== undefined)\n                popover.placement = this.popoverPlacement;\n            if (this.popoverAnimation !== undefined)\n                popover.animation = this.popoverAnimation;\n            if (this.popoverTitle !== undefined)\n                popover.title = this.popoverTitle;\n            if (this.popoverCloseOnClickOutside !== undefined)\n                popover.closeOnClickOutside = this.popoverCloseOnClickOutside;\n            if (this.popoverCloseOnMouseOutside !== undefined)\n                popover.closeOnMouseOutside = this.popoverCloseOnMouseOutside;\n\n            popover.onCloseFromOutside.subscribe(() => this.hide());\n            // if dismissTimeout option is set, then this popover will be dismissed in dismissTimeout time\n            if (this.popoverDismissTimeout > 0)\n                setTimeout(() => this.hide(), this.popoverDismissTimeout);\n        } else {\n            const popover = this.content as PopoverContent;\n            popover.popover = this;\n            if (this.popoverPlacement !== undefined)\n                popover.placement = this.popoverPlacement;\n            if (this.popoverAnimation !== undefined)\n                popover.animation = this.popoverAnimation;\n            if (this.popoverTitle !== undefined)\n                popover.title = this.popoverTitle;\n            if (this.popoverCloseOnClickOutside !== undefined)\n                popover.closeOnClickOutside = this.popoverCloseOnClickOutside;\n            if (this.popoverCloseOnMouseOutside !== undefined)\n                popover.closeOnMouseOutside = this.popoverCloseOnMouseOutside;\n\n            popover.onCloseFromOutside.subscribe(() => this.hide());\n            // if dismissTimeout option is set, then this popover will be dismissed in dismissTimeout time\n            if (this.popoverDismissTimeout > 0)\n                setTimeout(() => this.hide(), this.popoverDismissTimeout);\n            popover.show();\n        }\n    }\n\n    hide() {\n        if (!this.visible) return;\n\n        this.visible = false;\n        if (this.popover)\n            this.popover.destroy();\n\n        if (this.content instanceof PopoverContent)\n            (this.content as PopoverContent).hideFromPopover();\n    }\n\n    getElement() {\n        return this.viewContainerRef.element.nativeElement;\n    }\n\n}"],"sourceRoot":""}